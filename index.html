<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星际塔防游戏</title>
    <!-- 引入Font Awesome图标库 -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Bootstrap基础样式（简化布局） -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <!-- 自定义样式 -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container-fluid p-0">
        <!-- 登录页面 -->
        <div id="login-page" class="page active">
            <div class="login-container d-flex flex-column align-items-center justify-center min-vh-100 bg-dark text-white">
                <h1 class="text-4xl font-bold mb-6 text-primary">星际塔防</h1>
                <div class="avatar-selection d-flex gap-4 mb-6">
                    <div class="avatar-option border-2 border-gray-600 rounded-full p-3 cursor-pointer" data-avatar="1">
                        <i class="fa fa-user text-2xl"></i>
                    </div>
                    <div class="avatar-option border-2 border-gray-600 rounded-full p-3 cursor-pointer" data-avatar="2">
                        <i class="fa fa-robot text-2xl"></i>
                    </div>
                    <div class="avatar-option border-2 border-gray-600 rounded-full p-3 cursor-pointer" data-avatar="3">
                        <i class="fa fa-alien text-2xl"></i>
                    </div>
                    <div class="avatar-option border-2 border-gray-600 rounded-full p-3 cursor-pointer" data-avatar="4">
                        <i class="fa fa-star text-2xl"></i>
                    </div>
                </div>
                <button id="guest-login" class="btn btn-primary btn-lg px-8 py-3 mb-4">
                    游客登录
                </button>
                <p class="text-gray-400">选择头像后点击登录开始游戏</p>
            </div>
        </div>

        <!-- 个人中心页面 -->
        <div id="user-page" class="page hidden">
            <div class="user-container d-flex flex-column align-items-center justify-center min-vh-100 bg-dark text-white">
                <h1 class="text-4xl font-bold mb-6 text-primary">个人中心</h1>
                <div class="user-info d-flex align-items-center mb-8">
                    <div id="user-avatar" class="w-16 h-16 rounded-full bg-primary/20 border-2 border-primary flex items-center justify-center mr-4">
                        <i class="fa fa-user text-2xl text-primary"></i>
                    </div>
                    <div>
                        <h3 id="user-name" class="text-2xl font-bold">星际战士</h3>
                        <p id="user-id" class="text-gray-400">ID: 888888</p>
                    </div>
                </div>
                <div class="stats d-flex gap-8 mb-8">
                    <div class="stat-card text-center">
                        <p class="text-gray-400 mb-1">胜利次数</p>
                        <p id="win-count" class="text-3xl font-bold text-success">0</p>
                    </div>
                    <div class="stat-card text-center">
                        <p class="text-gray-400 mb-1">失败次数</p>
                        <p id="lose-count" class="text-3xl font-bold text-danger">0</p>
                    </div>
                    <div class="stat-card text-center">
                        <p class="text-gray-400 mb-1">胜率</p>
                        <p id="win-rate" class="text-3xl font-bold text-warning">0%</p>
                    </div>
                </div>
                <button id="start-game" class="btn btn-success btn-lg px-8 py-3 mb-4">
                    开始战斗
                </button>
                <button id="logout-btn" class="btn btn-outline-danger btn-lg px-8 py-3">
                    退出登录
                </button>
            </div>
        </div>

        <!-- 战斗页面 -->
        <div id="battle-page" class="page hidden">
            <div class="battle-container relative min-vh-100 bg-dark text-white">
                <!-- 顶部信息栏 -->
                <div class="battle-header d-flex justify-content-between align-items-center p-4 bg-dark/80 backdrop-blur-sm">
                    <div class="d-flex align-items-center">
                        <div id="battle-user-avatar" class="w-10 h-10 rounded-full bg-primary/20 border-2 border-primary flex items-center justify-center mr-2">
                            <i class="fa fa-user text-lg text-primary"></i>
                        </div>
                        <span id="battle-user-name" class="font-bold">星际战士</span>
                    </div>
                    <div class="d-flex gap-6">
                        <div class="score-info">
                            <p class="text-gray-400 text-sm">总积分</p>
                            <p id="battle-score" class="text-xl font-bold text-yellow-400">100</p>
                        </div>
                        <div class="score-info">
                            <p class="text-gray-400 text-sm">剩余积分</p>
                            <p id="remaining-score" class="text-xl font-bold text-green-400">100</p>
                        </div>
                        <div class="time-info">
                            <p class="text-gray-400 text-sm">剩余时间</p>
                            <p id="countdown-text" class="text-xl font-bold text-red-400" id="countdown">01:00</p>
                        </div>
                    </div>
                </div>

                <!-- 战斗区域 -->
                <div class="battle-field relative h-[calc(100vh-220px)] overflow-hidden bg-black/50 border-y-2 border-gray-700">
                    <!-- 大本营 -->
                    <div class="camp absolute bottom-4 left-1/2 transform -translate-x-1/2 w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center border-4 border-blue-300 shadow-lg">
                        <i class="fa fa-fort-awesome text-3xl text-white"></i>
                    </div>
                    <div class="camp-hp absolute bottom-32 left-1/2 transform -translate-x-1/2 w-40 bg-gray-800 rounded-lg p-1">
                        <div class="hp-fill bg-blue-500 h-2 rounded" id="camp-hp-fill" style="width: 100%"></div>
                    </div>
                    <p class="camp-hp-text absolute bottom-40 left-1/2 transform -translate-x-1/2 text-white text-sm">
                        大本营血量: <span id="camp-hp">200</span>/200
                    </p>

                    <!-- 伤害数值容器 -->
                    <div id="damage-container" class="absolute inset-0 pointer-events-none"></div>
                </div>

                <!-- 召唤区域 -->
                <div class="summon-area d-flex flex-wrap gap-3 justify-center mt-4 p-2">
                    <!-- 士兵按钮 -->
                    <button id="summon-soldier" class="summon-btn d-flex flex-column align-items-center justify-center p-3 bg-success/10 border border-success rounded-lg">
                        <i class="fa fa-user text-2xl text-success mb-1"></i>
                        <span class="text-sm font-bold text-success">士兵</span>
                        <span class="text-xs text-gray-600">10积分 | 均衡型</span>
                    </button>
                    <!-- 坦克按钮 -->
                    <button id="summon-tank" class="summon-btn d-flex flex-column align-items-center justify-center p-3 bg-warning/10 border border-warning rounded-lg">
                        <i class="fa fa-tank text-2xl text-warning mb-1"></i>
                        <span class="text-sm font-bold text-warning">坦克</span>
                        <span class="text-xs text-gray-600">30积分 | 肉盾型</span>
                    </button>
                    <!-- 弓箭手按钮 -->
                    <button id="summon-archer" class="summon-btn d-flex flex-column align-items-center justify-center p-3 bg-info/10 border border-info rounded-lg">
                        <i class="fa fa-bow-arrow text-2xl text-info mb-1"></i>
                        <span class="text-sm font-bold text-info">弓箭手</span>
                        <span class="text-xs text-gray-600">15积分 | 远程型</span>
                    </button>
                    <!-- 法师按钮 -->
                    <button id="summon-mage" class="summon-btn d-flex flex-column align-items-center justify-center p-3 bg-secondary/10 border border-secondary rounded-lg">
                        <i class="fa fa-wand-magic-sparkles text-2xl text-secondary mb-1"></i>
                        <span class="text-sm font-bold text-secondary">法师</span>
                        <span class="text-xs text-gray-600">25积分 | AOE型</span>
                    </button>
                    <!-- 骑士按钮 -->
                    <button id="summon-knight" class="summon-btn d-flex flex-column align-items-center justify-center p-3 bg-danger/10 border border-danger rounded-lg">
                        <i class="fa fa-horse-head text-2xl text-danger mb-1"></i>
                        <span class="text-sm font-bold text-danger">骑士</span>
                        <span class="text-xs text-gray-600">20积分 | 高速型</span>
                    </button>
                </div>

                <!-- 日志区域 -->
                <div class="battle-log-container absolute top-20 right-4 w-64 h-60 bg-black/70 backdrop-blur-sm rounded-lg p-3 overflow-y-auto">
                    <h4 class="text-white font-bold mb-2 border-b border-gray-700 pb-1">战斗日志</h4>
                    <div id="battle-log" class="text-sm space-y-1">
                        <!-- 日志内容动态生成 -->
                    </div>
                </div>

                <!-- 返回按钮 -->
                <button id="back-to-user" class="btn btn-outline-light absolute top-4 left-4">
                    <i class="fa fa-arrow-left mr-1"></i> 返回
                </button>
            </div>
        </div>

        <!-- 结算弹窗 -->
        <div id="battle-result" class="modal hidden fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50">
            <div class="modal-content bg-gray-900 rounded-lg p-8 max-w-md w-full text-center">
                <div id="result-icon-container" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-success bg-success/20 flex items-center justify-center">
                    <i id="result-icon" class="fa fa-trophy text-4xl text-success"></i>
                </div>
                <h2 id="result-title" class="text-2xl font-bold text-success mb-2">战斗胜利!</h2>
                <p id="result-desc" class="text-gray-400 mb-6">坚守1分钟！成功守护大本营</p>
                
                <div id="reward-section" class="mb-6">
                    <h4 class="text-white font-bold mb-3">战斗奖励</h4>
                    <div class="rewards d-flex justify-center gap-4">
                        <div class="reward-card bg-gray-800 rounded p-3">
                            <p class="text-gray-400 text-xs mb-1">胜利奖励</p>
                            <p id="reward-base" class="text-xl font-bold text-yellow-400">+50</p>
                        </div>
                        <div class="reward-card bg-gray-800 rounded p-3">
                            <p class="text-gray-400 text-xs mb-1">击杀奖励</p>
                            <p id="reward-kills" class="text-xl font-bold text-yellow-400">+0</p>
                        </div>
                        <div class="reward-card bg-gray-800 rounded p-3">
                            <p class="text-gray-400 text-xs mb-1">总获得</p>
                            <p id="reward-total" class="text-xl font-bold text-green-400">+0</p>
                        </div>
                    </div>
                </div>
                
                <div class="stats-summary mb-6">
                    <p class="text-gray-400 mb-2">战斗统计</p>
                    <div class="stats-grid grid grid-cols-2 gap-2 text-left">
                        <div class="stat-item">
                            <span class="text-gray-500">击杀数:</span>
                            <span id="stat-kills" class="text-white font-bold">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="text-gray-500">召唤数:</span>
                            <span id="stat-summoned" class="text-white font-bold">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="text-gray-500">大本营血量:</span>
                            <span id="stat-camp-hp" class="text-white font-bold">200/200</span>
                        </div>
                        <div class="stat-item">
                            <span class="text-gray-500">战斗时长:</span>
                            <span id="stat-time" class="text-white font-bold">01:00</span>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex gap-3">
                    <button id="back-to-user-from-result" class="flex-1 btn btn-outline-light py-2">
                        返回主页
                    </button>
                    <button id="play-again" class="flex-1 btn btn-success py-2">
                        再来一局
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 脚本文件（顺序：配置→工具→事件） -->
    <script src="game-config.js"></script>
    <script src="game-utils.js"></script>
    <script src="game-events.js"></script>
</body>
</html>